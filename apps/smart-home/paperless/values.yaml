---
paperless:
  #
  # IMPORTANT NOTE
  #
  # This chart inherits from our common library chart. You can check the default values/options here:
  # https://github.com/k8s-at-home/library-charts/tree/main/charts/stable/common/values.yaml
  #

  image:
    # -- image repository
    repository: jonaswinkler/paperless-ng
    # -- image pull policy
    pullPolicy: IfNotPresent
    # -- image tag
    tag: 1.4.5

  # -- See the following files for additional environment variables:
  # https://github.com/jonaswinkler/paperless-ng/tree/master/docker/compose/
  # https://github.com/jonaswinkler/paperless-ng/blob/master/paperless.conf.example
  # @default -- See below
  env:
    # -- Project name
    COMPOSE_PROJECT_NAME: paperless
    # -- Redis to use
    PAPERLESS_REDIS: redis://localhost:6379
    # -- OCR languages to install
    PAPERLESS_OCR_LANGUAGE: eng
    USERMAP_UID: 1000
    USERMAP_GID: 1000
    PAPERLESS_TIME_ZONE: Europe/London

  # -- Configures service settings for the chart.
  # @default -- See values.yaml
  service:
    main:
      ports:
        http:
          port: 8000


  ingress:
    main:
      enabled: true
      primary: true

      # -- Override the name suffix that is used for this ingress.
      # nameOverride:

      # -- Provide additional annotations which may be required.
      annotations:
        cert-manager.io/cluster-issuer: letsencrypt-production
        kubernetes.io/ingress.class: internal

      labels:
        app.kubernetes.io/name: argocd

      # -- Set the ingressClass that is used for this ingress.
      # Requires Kubernetes >=1.19
      # ingressClassName: internal

      ## Configure the hosts for the ingress
      hosts:
        -  # -- Host address. Helm template can be passed.
          host: paperless.private.channings.me
          ## Configure the paths for the host
          paths:
            -  # -- Path.  Helm template can be passed.
              path: /
              # -- Ignored if not kubeVersion >= 1.14-0
              pathType: ImplementationSpecific
              service:
                # -- Overrides the service name reference for this path
                name: paperless
                # -- Overrides the service port reference for this path
                port: 8000

      # -- Configure TLS for the ingress. Both secretName and hosts can process a Helm template.
      tls:
        - secretName: paperless-tls
          hosts:
            - paperless.private.channings.me

  persistence:
    # -- Configure persistence for data.
    # @default -- See values.yaml
    data:
      enabled: false
      mountPath: /usr/src/paperless/data
      accessMode: ReadWriteOnce
      type: pvc
      existingClaim: paperless-data
    # -- Configure persistence for media.
    # @default -- See values.yaml
    media:
      enabled: true
      mountPath: /usr/src/paperless/media
      accessMode: ReadWriteOnce
      type: pvc
      existingClaim: paperless-media
    # -- Configure volume to monitor for new documents.
    # @default -- See values.yaml
    consume:
      enabled: false
      mountPath: /usr/src/paperless/consume
      accessMode: ReadWriteOnce
      emptyDir:
        enabled: false
    # -- Configure export volume.
    # @default -- See values.yaml
    export:
      enabled: false
      mountPath: /usr/src/paperless/export
      accessMode: ReadWriteOnce
      emptyDir:
        enabled: false

  # -- Deploy local redis instance.
  # @default -- See values.yaml
  additionalContainers:
    - name: broker
      image: redis:6.0
      imagePullPolicy: IfNotPresent
